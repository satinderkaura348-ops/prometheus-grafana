# Namespace & general settings
namespace: grafana
createNamespace: true

fullnameOverride: grafana

# Deployment
replicaCount: 2   # HA setup

# Persistence
persistence:
  enabled: true
  storageClassName: gp3   # AWS EBS
  accessModes:
    - ReadWriteOnce
  size: 20Gi              # Adjust as per expected dashboard data

# Admin credentials
adminUser: admin
adminPassword: {{ .Values.grafanaAdminPassword }}   # Use ArgoCD secret or Helm value

# Service configuration
service:
  type: LoadBalancer      # AWS LB will be created automatically
  port: 3000

# Ingress is optional if LoadBalancer used
ingress:
  enabled: false

# Data sources (connect Grafana to Prometheus)
datasources:
  datasources.yaml:
    apiVersion: 1
    datasources:
      - name: Prometheus
        type: prometheus
        access: proxy
        url: http://prometheus-server.prometheus.svc.cluster.local:9090
        isDefault: true

# Dashboard provisioning (optional)
dashboards:
  default:
    my-dashboard:
      json: |
        {
          "dashboard": {
            "id": null,
            "title": "Sample Dashboard",
            "panels": [],
            "schemaVersion": 16,
            "version": 0
          }
        }
